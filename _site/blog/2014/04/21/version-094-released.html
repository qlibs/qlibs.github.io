<!doctype html>
<html lang="en">
  <head>
  <meta name="charset" content="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The Nim programming language is a concise, fast programming language that compiles to C, C++ and JavaScript.">
  <meta charset="utf-8">
  <link rel="icon" type="image/png" href="/assets/img/logo_bw.png" />

  
  <title>Version 0.9.4 released - Nim Blog</title>
  
  <link rel="stylesheet" href="/assets/css/pure.min.css">
  <link rel="stylesheet" href="/assets/css/pure-grids-responsive.min.css">
  <link href="https://use.fontawesome.com/releases/v5.0.2/css/all.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  
  <link rel="stylesheet" href="/assets/css/highlight/github.css">
  

  <link rel="stylesheet" href="/assets/css/google-fonts.css">
  <link rel="stylesheet" href="/assets/css/main.css?t=1721738524015683587">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48159761-1', 'auto');
    ga('send', 'pageview');

  </script>

  <script defer data-domain="nim-lang.org" src="https://plausible.io/js/plausible.js"></script>

  <meta name="twitter:title" content="Version 0.9.4 released">

  
  <meta name="twitter:description" content="The Nimrod development community is proud to announce the release of version 0.9.4 of the Nimrod compiler and tools. Note: This release has to be considered beta quality! Lots of new features have been implemented but unfortunately some do not fulfill our quality standards yet.">
  <meta property="og:description" content="The Nimrod development community is proud to announce the release of version 0.9.4 of the Nimrod compiler and tools. Note: This release has to be considered beta quality! Lots of new features have been implemented but unfortunately some do not fulfill our quality standards yet.">
  

  <meta name="twitter:site" content="@nim_lang">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://nim-lang.org/assets/img/twitter_banner.png">

  <meta property="og:title" content="Version 0.9.4 released" />
  <meta property="og:site_name" content="Nim Programming Language" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://nim-lang.org/assets/img/twitter_banner.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1000" />
  <meta property="og:image:height" content="500" />
  <meta property="og:image:alt" content="Nim Programming Language" />
</head>

  <body class="site">
    <header>
  <nav class="pure-menu pure-menu-horizontal pure-menu-scrollable">
    <div class="nav-content">
      <a href="/" class="pure-menu-heading pure-menu-link site-logo-container">
        <img class="site-logo" src="/assets/img/logo.svg" height="28" alt="Nim">
      </a>
      <ul class="pure-menu-list">
        
        <li class="pure-menu-item">
          <a href="/blog.html"
             class="pure-menu-link current">
            Blog
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/features.html"
             class="pure-menu-link ">
            Features
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/install.html"
             class="pure-menu-link ">
            Download
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/documentation.html"
             class="pure-menu-link ">
            Documentation
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="https://forum.nim-lang.org"
             class="pure-menu-link ">
            Forum
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/donate.html"
             class="pure-menu-link ">
            Donate
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://github.com/nim-lang/Nim">Source</a>
        </li>
      </ul>
    </div>
    <div class="menu-fade"></div>
  </nav>
</header>

    <div class="site-content post-page">
      <div class="content">
        <div class="width-reduced">
          <h1 class="post-title">
            Version 0.9.4 released
          </h1>
          <h3 class="post-meta">
            <span>
              <i class="far fa-calendar-alt" aria-hidden="true"></i>
              21 April 2014
            </span>
            
            <span>
              <i class="fa fa-user-circle" aria-hidden="true"></i>
              Dominik Picheta
            </span>
            
          </h3>
          <p>The Nimrod development community is proud to announce the release of version
0.9.4 of the Nimrod compiler and tools. <strong>Note: This release has to be
considered beta quality! Lots of new features have been implemented but
unfortunately some do not fulfill our quality standards yet.</strong></p>

<p>Prebuilt binaries and instructions for building from source are available
on the <a href="/install.html">download page</a>.</p>

<p>This release includes about
<a href="https://github.com/Araq/Nimrod/compare/v0.9.2...v0.9.4">1400 changes</a>
in total including various bug
fixes, new languages features and standard library additions and improvements.
This release brings with it support for user-defined type classes, a brand
new VM for executing Nimrod code at compile-time and new symbol binding
rules for clean templates.</p>

<p>It also introduces support for the brand new
<a href="https://github.com/nimrod-code/babel">Babel package manager</a> which
has itself seen its first release recently. Many of the wrappers that were
present in the standard library have been moved to separate repositories
and should now be installed using Babel.</p>

<p>Apart from that a new <strong>experimental</strong> Asynchronous IO API has been added via
the <code class="language-plaintext highlighter-rouge">asyncdispatch</code> and <code class="language-plaintext highlighter-rouge">asyncnet</code> modules. The <code class="language-plaintext highlighter-rouge">net</code> and <code class="language-plaintext highlighter-rouge">rawsockets</code>
modules have also been added and they will likely replace the sockets
module in the next release. The Asynchronous IO API has been designed to
take advantage of Linux’s epoll and Windows’ IOCP APIs, support for BSD’s
kqueue has not been implemented yet but will be in the future.
The Asynchronous IO API provides both
a callback interface and an interface which allows you to write code as you
would if you were writing synchronous code. The latter is done through
the use of an <code class="language-plaintext highlighter-rouge">await</code> macro which behaves similar to C#’s await. The
following is a very simple chat server demonstrating Nimrod’s new async
capabilities.</p>

<div class="language-nim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="n">asyncnet</span><span class="p">,</span> <span class="n">asyncdispatch</span>

<span class="k">var</span> <span class="n">clients</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="n">PAsyncSocket</span><span class="o">]</span> <span class="o">=</span> <span class="o">@[]</span>

<span class="k">proc </span><span class="nf">processClient</span><span class="p">(</span><span class="n">client</span><span class="p">:</span> <span class="n">PAsyncSocket</span><span class="p">)</span> <span class="p">{.</span><span class="n">async</span><span class="p">.}</span> <span class="o">=</span>
  <span class="k">while</span> <span class="kp">true</span><span class="p">:</span>
    <span class="k">let</span> <span class="n">line</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="p">.</span><span class="n">recvLine</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">clients</span><span class="p">:</span>
      <span class="n">await</span> <span class="n">c</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">line</span> <span class="o">&amp;</span> <span class="s">"</span><span class="se">\c</span><span class="s">\L"</span><span class="p">)</span>

<span class="k">proc </span><span class="nf">serve</span><span class="p">()</span> <span class="p">{.</span><span class="n">async</span><span class="p">.}</span> <span class="o">=</span>
  <span class="k">var</span> <span class="n">server</span> <span class="o">=</span> <span class="n">newAsyncSocket</span><span class="p">()</span>
  <span class="n">server</span><span class="p">.</span><span class="n">bindAddr</span><span class="p">(</span><span class="n">TPort</span><span class="p">(</span><span class="mi">12345</span><span class="p">))</span>
  <span class="n">server</span><span class="p">.</span><span class="n">listen</span><span class="p">()</span>

  <span class="k">while</span> <span class="kp">true</span><span class="p">:</span>
    <span class="k">let</span> <span class="n">client</span> <span class="o">=</span> <span class="n">await</span> <span class="n">server</span><span class="p">.</span><span class="n">accept</span><span class="p">()</span>
    <span class="n">clients</span><span class="p">.</span><span class="n">add</span> <span class="n">client</span>

    <span class="n">processClient</span><span class="p">(</span><span class="n">client</span><span class="p">)</span>

<span class="n">serve</span><span class="p">()</span>
<span class="n">runForever</span><span class="p">()</span>
</code></pre></div></div>

<p>Note that this feature has been implemented with Nimrod’s macro system and so
<code class="language-plaintext highlighter-rouge">await</code> and <code class="language-plaintext highlighter-rouge">async</code> are no keywords.</p>

<p>Syntactic sugar for anonymous procedures has also been introduced. It too has
been implemented as a macro. The following shows some simple usage of the new
syntax:</p>

<div class="language-nim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="n">future</span>

<span class="k">var</span> <span class="n">s</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="o">]</span>
<span class="n">echo</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">map</span><span class="p">((</span><span class="n">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">x</span> <span class="o">*</span> <span class="mi">5</span><span class="p">))</span>
</code></pre></div></div>

<p>A list of changes follows, for a comprehensive list of changes take a look
<a href="https://github.com/Araq/Nimrod/compare/v0.9.2...v0.9.4">here</a>.</p>

<h2 id="library-additions">Library Additions</h2>

<ul>
  <li>Added <code class="language-plaintext highlighter-rouge">macros.genSym</code> builtin for AST generation.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">macros.newLit</code> procs for easier AST generation.</li>
  <li>Added module <code class="language-plaintext highlighter-rouge">logging</code>.</li>
  <li>Added module <code class="language-plaintext highlighter-rouge">asyncdispatch</code>.</li>
  <li>Added module <code class="language-plaintext highlighter-rouge">asyncnet</code>.</li>
  <li>Added module <code class="language-plaintext highlighter-rouge">net</code>.</li>
  <li>Added module <code class="language-plaintext highlighter-rouge">rawsockets</code>.</li>
  <li>Added module <code class="language-plaintext highlighter-rouge">selectors</code>.</li>
  <li>Added module <code class="language-plaintext highlighter-rouge">asynchttpserver</code>.</li>
  <li>Added support for the new asynchronous IO in the <code class="language-plaintext highlighter-rouge">httpclient</code> module.</li>
  <li>Added a Python-inspired <code class="language-plaintext highlighter-rouge">future</code> module that features upcoming additions
to the <code class="language-plaintext highlighter-rouge">system</code> module.</li>
</ul>

<h2 id="changes-affecting-backwards-compatibility">Changes affecting backwards compatibility</h2>

<ul>
  <li>The scoping rules for the <code class="language-plaintext highlighter-rouge">if</code> statement changed for better interaction
with the new syntactic construct <code class="language-plaintext highlighter-rouge">(;)</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">OSError</code> family of procedures has been deprecated. Procedures with the same
name but which take different parameters have been introduced. These procs now
require an error code to be passed to them. This error code can be retrieved
using the new <code class="language-plaintext highlighter-rouge">OSLastError</code> proc.</li>
  <li><code class="language-plaintext highlighter-rouge">os.parentDir</code> now returns “” if there is no parent dir.</li>
  <li>In CGI scripts stacktraces are shown to the user only
if <code class="language-plaintext highlighter-rouge">cgi.setStackTraceStdout</code> is used.</li>
  <li>The symbol binding rules for clean templates changed: <code class="language-plaintext highlighter-rouge">bind</code> for any
symbol that’s not a parameter is now the default. <code class="language-plaintext highlighter-rouge">mixin</code> can be used
to require instantiation scope for a symbol.</li>
  <li><code class="language-plaintext highlighter-rouge">quoteIfContainsWhite</code> now escapes argument in such way that it can be safely
passed to shell, instead of just adding double quotes.</li>
  <li><code class="language-plaintext highlighter-rouge">macros.dumpTree</code> and <code class="language-plaintext highlighter-rouge">macros.dumpLisp</code> have been made <code class="language-plaintext highlighter-rouge">immediate</code>,
<code class="language-plaintext highlighter-rouge">dumpTreeImm</code> and <code class="language-plaintext highlighter-rouge">dumpLispImm</code> are now deprecated.</li>
  <li>The <code class="language-plaintext highlighter-rouge">nil</code> statement has been deprecated, use an empty <code class="language-plaintext highlighter-rouge">discard</code> instead.</li>
  <li><code class="language-plaintext highlighter-rouge">sockets.select</code> now prunes sockets that are <strong>not</strong> ready from the list
of sockets given to it.</li>
  <li>The <code class="language-plaintext highlighter-rouge">noStackFrame</code> pragma has been renamed to <code class="language-plaintext highlighter-rouge">asmNoStackFrame</code> to
ensure you only use it when you know what you’re doing.</li>
  <li>Many of the wrappers that were present in the standard library have been
moved to separate repositories and should now be installed using Babel.</li>
</ul>

<h2 id="compiler-additions">Compiler Additions</h2>

<ul>
  <li>The compiler can now warn about “uninitialized” variables. (There are no
real uninitialized variables in Nimrod as they are initialized to binary
zero). Activate via <code class="language-plaintext highlighter-rouge">{.warning[Uninit]:on.}</code>.</li>
  <li>The compiler now enforces the <code class="language-plaintext highlighter-rouge">not nil</code> constraint.</li>
  <li>The compiler now supports a <code class="language-plaintext highlighter-rouge">codegenDecl</code> pragma for even more control
over the generated code.</li>
  <li>The compiler now supports a <code class="language-plaintext highlighter-rouge">computedGoto</code> pragma to support very fast
dispatching for interpreters and the like.</li>
  <li>The old evaluation engine has been replaced by a proper register based
virtual machine. This fixes numerous bugs for <code class="language-plaintext highlighter-rouge">nimrod i</code> and for macro
evaluation.</li>
  <li><code class="language-plaintext highlighter-rouge">--gc:none</code> produces warnings when code uses the GC.</li>
  <li>A <code class="language-plaintext highlighter-rouge">union</code> pragma for better C interoperability is now supported.</li>
  <li>A <code class="language-plaintext highlighter-rouge">packed</code> pragma to control the memory packing/alignment of fields in
an object.</li>
  <li>Arrays can be annotated to be <code class="language-plaintext highlighter-rouge">unchecked</code> for easier low level
manipulations of memory.</li>
  <li>Support for the new Babel package manager.</li>
</ul>

<h2 id="language-additions">Language Additions</h2>

<ul>
  <li>Arrays can now be declared with a single integer literal <code class="language-plaintext highlighter-rouge">N</code> instead of a
range; the range is then <code class="language-plaintext highlighter-rouge">0..N-1</code>.</li>
  <li>Added <code class="language-plaintext highlighter-rouge">requiresInit</code> pragma to enforce explicit initialization.</li>
  <li>Exported templates are allowed to access hidden fields.</li>
  <li>The <code class="language-plaintext highlighter-rouge">using statement</code> enables you to more easily author domain-specific
languages and libraries providing OOP-like syntactic sugar.</li>
  <li>Added the possibility to override various dot operators in order to handle
calls to missing procs and reads from undeclared fields at compile-time.</li>
  <li>The overload resolution now supports <code class="language-plaintext highlighter-rouge">static[T]</code> params that must be
evaluable at compile-time.</li>
  <li>Support for user-defined type classes has been added.</li>
  <li>The <em>command syntax</em> is supported in a lot more contexts.</li>
  <li>Anonymous iterators are now supported and iterators can capture variables
of an outer proc.</li>
  <li>The experimental <code class="language-plaintext highlighter-rouge">strongSpaces</code> parsing mode has been implemented.</li>
  <li>You can annotate pointer types with regions for increased type safety.</li>
  <li>Added support for the builtin <code class="language-plaintext highlighter-rouge">spawn</code> for easy thread pool usage.</li>
</ul>

<h2 id="tools-improvements">Tools improvements</h2>

<ul>
  <li>c2nim can deal with a subset of C++. Use the <code class="language-plaintext highlighter-rouge">--cpp</code> command line option
to activate.</li>
</ul>

        </div>
      </div>
    </div>
    <footer>
  <section class="content">
    <div class="pure-g">
      <div class="copyright pure-u-2-3">
        <p>
          Unless otherwise stated, the content of this page is
          licensed under the
          <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0</a>
          license.
          Code displayed on this website is MIT licensed.
        </p>
        <p>
          This website is available on
          <a href="https://github.com/nim-lang/website">GitHub</a>
          and contributions are welcome.
          Original website design by
          <a href="https://github.com/dom96">Dominik Picheta</a> and
          <a href="https://github.com/Calinou">Hugo Locurcio</a>.
          Logo by <a href="https://github.com/josephwecker">Joseph Wecker</a>.
        </p>
      </div>
      <div class="pure-u-1-3 right-center">
        <a href="https://m.do.co/c/637ab907c7f4"><img src="/assets/img/do.png"/></a>
      </div>
    </div>
  </section>

</footer>
<script>
    (function(){
      function setTracking(a) {
        var url = a.href;
        a.onclick = function() {
          if (typeof(ga) !== "undefined") {
            ga('send', 'event', 'outbound', 'click', url, {
              'transport': 'beacon',
              'hitCallback': function(){document.location = url;}
            });
          }
        };
      }

      var a = document.getElementsByTagName("a");
      for (var i = 0; i < a.length; ++i) {
        if (a[i].hostname != location.hostname &&
            a[i].getAttribute("target") !== "_blank"
        ) {
          setTracking(a[i])
        }
      }
    })();
</script>

  </div>
  </body>
</html>
