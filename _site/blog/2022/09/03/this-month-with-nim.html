<!doctype html>
<html lang="en">
  <head>
  <meta name="charset" content="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The Nim programming language is a concise, fast programming language that compiles to C, C++ and JavaScript.">
  <meta charset="utf-8">
  <link rel="icon" type="image/png" href="/assets/img/logo_bw.png" />

  
  <title>This Month with Nim: June and July 2022 - Nim Blog</title>
  
  <link rel="stylesheet" href="/assets/css/pure.min.css">
  <link rel="stylesheet" href="/assets/css/pure-grids-responsive.min.css">
  <link href="https://use.fontawesome.com/releases/v5.0.2/css/all.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  
  <link rel="stylesheet" href="/assets/css/highlight/github.css">
  

  <link rel="stylesheet" href="/assets/css/google-fonts.css">
  <link rel="stylesheet" href="/assets/css/main.css?t=1721738524015683587">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48159761-1', 'auto');
    ga('send', 'pageview');

  </script>

  <script defer data-domain="nim-lang.org" src="https://plausible.io/js/plausible.js"></script>

  <meta name="twitter:title" content="This Month with Nim: June and July 2022">

  
  <meta name="twitter:description" content="Home Automation, NimYAML 1.0, and a LaTeX like">
  <meta property="og:description" content="Home Automation, NimYAML 1.0, and a LaTeX like">
  

  <meta name="twitter:site" content="@nim_lang">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://nim-lang.org/assets/img/twitter_banner.png">

  <meta property="og:title" content="This Month with Nim: June and July 2022" />
  <meta property="og:site_name" content="Nim Programming Language" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://nim-lang.org/assets/img/twitter_banner.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1000" />
  <meta property="og:image:height" content="500" />
  <meta property="og:image:alt" content="Nim Programming Language" />
</head>

  <body class="site">
    <header>
  <nav class="pure-menu pure-menu-horizontal pure-menu-scrollable">
    <div class="nav-content">
      <a href="/" class="pure-menu-heading pure-menu-link site-logo-container">
        <img class="site-logo" src="/assets/img/logo.svg" height="28" alt="Nim">
      </a>
      <ul class="pure-menu-list">
        
        <li class="pure-menu-item">
          <a href="/blog.html"
             class="pure-menu-link current">
            Blog
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/features.html"
             class="pure-menu-link ">
            Features
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/install.html"
             class="pure-menu-link ">
            Download
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/documentation.html"
             class="pure-menu-link ">
            Documentation
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="https://forum.nim-lang.org"
             class="pure-menu-link ">
            Forum
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/donate.html"
             class="pure-menu-link ">
            Donate
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://github.com/nim-lang/Nim">Source</a>
        </li>
      </ul>
    </div>
    <div class="menu-fade"></div>
  </nav>
</header>

    <div class="site-content post-page">
      <div class="content">
        <div class="width-reduced">
          <h1 class="post-title">
            This Month with Nim: June and July 2022
          </h1>
          <h3 class="post-meta">
            <span>
              <i class="far fa-calendar-alt" aria-hidden="true"></i>
              03 September 2022
            </span>
            
            <span>
              <i class="fa fa-user-circle" aria-hidden="true"></i>
              The Nim Community
            </span>
            
          </h3>
          <h2 id="libcoap"><a href="https://github.com/PMunch/libcoap">libcoap</a></h2>

<h4 id="author-pmunch">Author: <a href="https://github.com/PMunch">PMunch</a></h4>

<p>CoAP, the Constrained Applications Protocol, is a protocol which is most commonly used for communicating with IoT devices.</p>

<p><a href="https://github.com/PMunch/libcoap">This library</a> uses Futhark to wrap the C library <code class="language-plaintext highlighter-rouge">libcoap</code>.
Then it has a nice Nim-like interface on top with automatic memory management (using destructors) and async integration so that it fits right in with your other Nim libraries.
Currently fairly limited in what it supports, only the things needed for my own IKEA Home Smart integration has been implemented (but since it’s wrapped with Futhark you still have access to all the low-level C procedures and types from libcoap).</p>

<h2 id="nimyaml"><a href="https://github.com/flyx/NimYAML">NimYAML</a></h2>

<h4 id="author-flyx">Author: <a href="https://github.com/flyx">flyx</a></h4>

<p>NimYAML has long been in pure maintenance mode.
To reflect this, I have set the version number to <code class="language-plaintext highlighter-rouge">1.0.0</code> for the most recent release (previous releases used <code class="language-plaintext highlighter-rouge">0.x.y</code> versions).</p>

<p>The single significant feature in this release is that the DOM API has been merged into the serialization API. Previously, you had the option to load your YAML either directly into native types (objects, seqs, strings, etc) or into a <code class="language-plaintext highlighter-rouge">YamlDocument</code> which is a descriptive, DOM-like representation of the YAML structure which contains <code class="language-plaintext highlighter-rouge">YamlNode</code>s. Now, you can have a <code class="language-plaintext highlighter-rouge">YamlNode</code> anywhere in your target type and NimYAML will parse the subgraph at that position into a descriptive <code class="language-plaintext highlighter-rouge">YamlNode</code> value.
For example:</p>

<div class="language-nim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="n">yaml</span>

<span class="k">type</span>
  <span class="n">Root</span> <span class="o">=</span> <span class="k">object</span>
    <span class="n">id</span><span class="p">:</span> <span class="kt">string</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">YamlNode</span>

<span class="k">var</span> <span class="n">loaded</span> <span class="o">=</span> <span class="n">loadAs</span><span class="o">[</span><span class="n">Root</span><span class="o">]</span><span class="p">(</span><span class="s">"""
id: 12345
data:
  a: b
  c: [d, e]
"""</span><span class="p">)</span>

<span class="n">loaded</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="s">"123456"</span>
<span class="n">echo</span> <span class="n">dump</span><span class="p">(</span><span class="n">loaded</span><span class="p">,</span> <span class="n">tsNone</span><span class="p">,</span> <span class="n">asNone</span><span class="p">,</span> <span class="n">defineOptions</span><span class="p">(</span><span class="n">outputVersion</span> <span class="o">=</span> <span class="n">ovNone</span><span class="p">),</span> <span class="o">@[]</span><span class="p">)</span>
</code></pre></div></div>

<p>This gives</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">---</span>
<span class="na">id</span><span class="pi">:</span> <span class="m">123456</span>
<span class="na">data</span><span class="pi">:</span>
  <span class="na">c</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">d</span><span class="pi">,</span> <span class="nv">e</span><span class="pi">]</span>
  <span class="na">a</span><span class="pi">:</span> <span class="s">b</span>
</code></pre></div></div>

<p>The use-case for this is when you do not care about certain subgraphs from the YAML input, but do want to keep the contained data.
As you can see, NimYAML might not keep the order of mapping keys (due to usage of hash maps), which is conformant to the YAML specification.</p>

<p>The old DOM API is still supported, but carries deprecation warnings from now on.
If you want to parse the  whole YAML input into a DOM, you can use <code class="language-plaintext highlighter-rouge">loadAs[YamlNode](…)</code> now.</p>

<h2 id="matext"><a href="https://xigoi.srht.site/matext/">maTeXt</a></h2>

<h4 id="author-xiogoi">Author: <a href="https://github.com/xigoi">xiogoi</a></h4>

<p>Communicating online about math is often difficult.
The notation uses many characters that are hard to type and makes liberal use of fonts and two-dimensional layout.
To deal with this, there’s the awesome (La)TeX typesetting system and tools like <a href="https://katex.org/">KaTeX</a> that allow using it on the web, but sometimes that’s not possible — for example, when using a text messaging app or publishing articles using the <a href="https://gemini.circumlunar.space/">Gemini</a> protocol.</p>

<p>That’s why I created <a href="https://xigoi.srht.site/matext/">maTeXt</a>, a library and CLI application that renders LaTeX math to plain text using Unicode math characters. For vertical notation, it uses multiple lines and assumes a monospace font, but in case that’s not available, it also supports one-line mode.</p>

<p>Here is an example of the quadratic formula in LaTeX, multiline maTeXt and one-line maTeXt. (The multiline version may look broken because of a bad monospace font.)</p>

<div class="language-latex highlighter-rouge"><div class="highlight"><pre class="highlight"><code>x<span class="p">_{</span>1,2<span class="p">}</span> = <span class="k">\frac</span><span class="p">{</span>-b <span class="k">\pm</span> <span class="k">\sqrt</span><span class="p">{</span>b<span class="p">^</span>2 - 4ac<span class="p">}}{</span>2a<span class="p">}</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>                 ________
                ╱ 2
        − 𝑏 ± ╲╱ 𝑏  − 4𝑎𝑐
𝑥     = ─────────────────
 1, 2          2𝑎
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>𝑥_(1, 2) = (− 𝑏 ± √(𝑏² − 4𝑎𝑐)) / (2𝑎)
</code></pre></div></div>

<p>Currently, not all notation is supported; I’m intending to improve that.
Obviously you can also contribute if you want.</p>

<p>Thanks to the authors of <a href="https://katrinakitten.github.io/honeycomb/honeycomb.html">honeycomb</a> and <a href="https://github.com/c-blake/cligen/">cligen</a> and to the <a href="https://unicode-table.com/en/">Unicode Table</a> for making this possible.</p>

<h2 id="ikea-home-smart"><a href="https://github.com/PMunch/ikeahomesmart">IKEA Home Smart</a></h2>

<h4 id="authors-pmunch">Authors: <a href="https://github.com/PMunch">Pmunch</a></h4>

<p>Have you got IKEA Home Smart bulbs in your house?
Want to automate them with some nice type-safe scripts?
Then you’ve come to the right place.</p>

<p>Unlike Home Assistant and Openhabian which uses a CoAP client program which is executed for every bulb change, <a href="https://github.com/PMunch/ikeahomesmart">IKEA Home Smart</a> uses libcoap directly to speak to your gateway and control your bulbs.
It is also completely async, so you can send multiple commands at the same time and wait for them all to complete (CoAP only allows a single transaction at a time, but you can queue up requests which will be fired one after the other while your program does something else). It supports groups and bulbs, and setting the brightness, colour, and temperature of the bulbs (as long as the hardware supports it).</p>

<hr />

<h2 id="want-to-see-your-project-here-next-month">Want to see your project here next month?</h2>

<p><a href="https://github.com/beef331/website#adding-your-project-to-month-with-nim">Follow this</a>
to add your project to the next month’s blog post.</p>

        </div>
      </div>
    </div>
    <footer>
  <section class="content">
    <div class="pure-g">
      <div class="copyright pure-u-2-3">
        <p>
          Unless otherwise stated, the content of this page is
          licensed under the
          <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0</a>
          license.
          Code displayed on this website is MIT licensed.
        </p>
        <p>
          This website is available on
          <a href="https://github.com/nim-lang/website">GitHub</a>
          and contributions are welcome.
          Original website design by
          <a href="https://github.com/dom96">Dominik Picheta</a> and
          <a href="https://github.com/Calinou">Hugo Locurcio</a>.
          Logo by <a href="https://github.com/josephwecker">Joseph Wecker</a>.
        </p>
      </div>
      <div class="pure-u-1-3 right-center">
        <a href="https://m.do.co/c/637ab907c7f4"><img src="/assets/img/do.png"/></a>
      </div>
    </div>
  </section>

</footer>
<script>
    (function(){
      function setTracking(a) {
        var url = a.href;
        a.onclick = function() {
          if (typeof(ga) !== "undefined") {
            ga('send', 'event', 'outbound', 'click', url, {
              'transport': 'beacon',
              'hitCallback': function(){document.location = url;}
            });
          }
        };
      }

      var a = document.getElementsByTagName("a");
      for (var i = 0; i < a.length; ++i) {
        if (a[i].hostname != location.hostname &&
            a[i].getAttribute("target") !== "_blank"
        ) {
          setTracking(a[i])
        }
      }
    })();
</script>

  </div>
  </body>
</html>
