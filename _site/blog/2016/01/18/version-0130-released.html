<!doctype html>
<html lang="en">
  <head>
  <meta name="charset" content="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The Nim programming language is a concise, fast programming language that compiles to C, C++ and JavaScript.">
  <meta charset="utf-8">
  <link rel="icon" type="image/png" href="/assets/img/logo_bw.png" />

  
  <title>Version 0.13.0 released - Nim Blog</title>
  
  <link rel="stylesheet" href="/assets/css/pure.min.css">
  <link rel="stylesheet" href="/assets/css/pure-grids-responsive.min.css">
  <link href="https://use.fontawesome.com/releases/v5.0.2/css/all.css" rel="stylesheet">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  
  <link rel="stylesheet" href="/assets/css/highlight/github.css">
  

  <link rel="stylesheet" href="/assets/css/google-fonts.css">
  <link rel="stylesheet" href="/assets/css/main.css?t=1721738524015683587">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-48159761-1', 'auto');
    ga('send', 'pageview');

  </script>

  <script defer data-domain="nim-lang.org" src="https://plausible.io/js/plausible.js"></script>

  <meta name="twitter:title" content="Version 0.13.0 released">

  
  <meta name="twitter:description" content="Once again we are proud to announce the latest release of the Nim compiler and related tools. This release comes just 3 months after the last release!">
  <meta property="og:description" content="Once again we are proud to announce the latest release of the Nim compiler and related tools. This release comes just 3 months after the last release!">
  

  <meta name="twitter:site" content="@nim_lang">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://nim-lang.org/assets/img/twitter_banner.png">

  <meta property="og:title" content="Version 0.13.0 released" />
  <meta property="og:site_name" content="Nim Programming Language" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="https://nim-lang.org/assets/img/twitter_banner.png" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="1000" />
  <meta property="og:image:height" content="500" />
  <meta property="og:image:alt" content="Nim Programming Language" />
</head>

  <body class="site">
    <header>
  <nav class="pure-menu pure-menu-horizontal pure-menu-scrollable">
    <div class="nav-content">
      <a href="/" class="pure-menu-heading pure-menu-link site-logo-container">
        <img class="site-logo" src="/assets/img/logo.svg" height="28" alt="Nim">
      </a>
      <ul class="pure-menu-list">
        
        <li class="pure-menu-item">
          <a href="/blog.html"
             class="pure-menu-link current">
            Blog
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/features.html"
             class="pure-menu-link ">
            Features
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/install.html"
             class="pure-menu-link ">
            Download
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/documentation.html"
             class="pure-menu-link ">
            Documentation
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="https://forum.nim-lang.org"
             class="pure-menu-link ">
            Forum
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a href="/donate.html"
             class="pure-menu-link ">
            Donate
          </a>
        </li>
        
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://github.com/nim-lang/Nim">Source</a>
        </li>
      </ul>
    </div>
    <div class="menu-fade"></div>
  </nav>
</header>

    <div class="site-content post-page">
      <div class="content">
        <div class="width-reduced">
          <h1 class="post-title">
            Version 0.13.0 released
          </h1>
          <h3 class="post-meta">
            <span>
              <i class="far fa-calendar-alt" aria-hidden="true"></i>
              18 January 2016
            </span>
            
            <span>
              <i class="fa fa-user-circle" aria-hidden="true"></i>
              Dominik Picheta
            </span>
            
          </h3>
          <p>Once again we are proud to announce the latest release of the Nim compiler
and related tools. This release comes just 3 months after the last
release!</p>

<p>A new version of Nimble which depends on this release, has also been
released. See <a href="http://forum.nim-lang.org/t/1912">this</a> forum thread for
more information about the Nimble release.</p>

<p>This release of Nim includes over 116 bug fixes, many of which are related
to closures. The lambda lifting algorithm in the compiler has been completely
rewritten, and some changes have been made to the semantics of closures in
Nim as a result. These changes may affect backwards compatibility and are all
described in the section below.</p>

<p>With this release, we are one step closer to Nim version 1.0.
The 1.0 release will be a big milestone for Nim, because after that version
is released there will be no more breaking changes made to the language
or the standard library.</p>

<p>That being said, the next release will likely be Nim 0.14. It will focus on
improvements to the GC and concurrency. We will in particular be looking at
ways to add multi-core support to async await. Standard library improvements
are also on our roadmap but may not make it for Nim 0.14.</p>

<p>As always you can download the latest version of Nim from the
<a href="/install.html">download</a> page.</p>

<p>Happy coding!</p>

<h2 id="changes-affecting-backwards-compatibility">Changes affecting backwards compatibility</h2>

<ul>
  <li><code class="language-plaintext highlighter-rouge">macros.newLit</code> for <code class="language-plaintext highlighter-rouge">bool</code> now produces false/true symbols which
actually work with the bool datatype.</li>
  <li>When compiling to JS: <code class="language-plaintext highlighter-rouge">Node</code>, <code class="language-plaintext highlighter-rouge">NodeType</code> and <code class="language-plaintext highlighter-rouge">Document</code> are no longer
defined. Use the types defined in <code class="language-plaintext highlighter-rouge">dom.nim</code> instead.</li>
  <li>The check <code class="language-plaintext highlighter-rouge">x is iterator</code> (used for instance in concepts) was always a
weird special case (you could not use <code class="language-plaintext highlighter-rouge">x is proc</code>) and was removed from
the language.</li>
  <li>Top level routines cannot have the calling convention <code class="language-plaintext highlighter-rouge">closure</code>
anymore.</li>
  <li>The <code class="language-plaintext highlighter-rouge">redis</code> module has been moved out of the standard library. It can
now be installed via Nimble and is located here:
https://github.com/nim-lang/redis</li>
  <li><code class="language-plaintext highlighter-rouge">math.RunningStat</code> and its associated procs have been moved from
the <code class="language-plaintext highlighter-rouge">math</code> module to a new <code class="language-plaintext highlighter-rouge">stats</code> module.</li>
</ul>

<h2 id="syntax-changes">Syntax changes</h2>

<p>The parser now considers leading whitespace in front of operators
to determine if an operator is used in prefix or infix position.
This means that finally <code class="language-plaintext highlighter-rouge">echo $foo</code> is parsed as people expect,
which is as <code class="language-plaintext highlighter-rouge">echo($foo)</code>. It used to be parsed as <code class="language-plaintext highlighter-rouge">(echo) $ (foo)</code>.</p>

<p><code class="language-plaintext highlighter-rouge">echo $ foo</code> continues to be parsed as <code class="language-plaintext highlighter-rouge">(echo) $ (foo)</code>.</p>

<p>This also means that <code class="language-plaintext highlighter-rouge">-1</code> is always parsed as prefix operator so
code like <code class="language-plaintext highlighter-rouge">0..kArraySize div 2 -1</code> needs to be changed to
<code class="language-plaintext highlighter-rouge">0..kArraySize div 2 - 1</code>.</p>

<p>This release also adds multi-line comments to Nim. The syntax for them is:
<code class="language-plaintext highlighter-rouge">#[ comment here ]#</code>. For more details read the section of
the <a href="docs/manual.html#lexical-analysis-multiline-comments">manual</a>.</p>

<h2 id="iterator-changes">Iterator changes</h2>

<p>Implicit return type inference for iterators has been removed from the language. The following used to work:</p>

<div class="language-nim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">iterator</span> <span class="n">it</span> <span class="o">=</span>
  <span class="k">yield</span> <span class="mi">7</span>
</code></pre></div></div>

<p>This was a strange special case and has been removed. Now you need to write it like so which is consistent with procs:</p>

<div class="language-nim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">iterator</span> <span class="n">it</span><span class="p">:</span> <span class="n">auto</span> <span class="o">=</span>
  <span class="k">yield</span> <span class="mi">7</span>
</code></pre></div></div>

<h2 id="closure-changes">Closure changes</h2>

<p>The semantics of closures changed: Capturing variables that are in loops do not produce a new environment. Nim closures behave like JavaScript closures now.</p>

<p>The following used to work as the environment creation used to be attached to the loop body:</p>

<div class="language-nim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">proc </span><span class="nf">outer</span> <span class="o">=</span>
  <span class="k">var</span> <span class="n">s</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="k">proc</span><span class="p">():</span> <span class="kt">int</span> <span class="p">{.</span><span class="n">closure</span><span class="p">.}</span><span class="o">]</span> <span class="o">=</span> <span class="o">@[]</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">0</span> <span class="p">..</span><span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
    <span class="k">let</span> <span class="n">ii</span> <span class="o">=</span> <span class="n">i</span>
    <span class="n">s</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="k">proc</span><span class="p">():</span> <span class="kt">int</span> <span class="o">=</span> <span class="k">return</span> <span class="n">ii</span><span class="o">*</span><span class="n">ii</span><span class="p">)</span>
</code></pre></div></div>

<p>This behaviour has changed in 0.13.0 and now needs to be written as:</p>

<div class="language-nim highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">proc </span><span class="nf">outer</span> <span class="o">=</span>
  <span class="k">var</span> <span class="n">s</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="k">proc</span><span class="p">():</span> <span class="kt">int</span> <span class="p">{.</span><span class="n">closure</span><span class="p">.}</span><span class="o">]</span> <span class="o">=</span> <span class="o">@[]</span>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">0</span> <span class="p">..</span><span class="o">&lt;</span> <span class="mi">30</span><span class="p">:</span>
    <span class="p">(</span><span class="k">proc</span> <span class="p">()</span> <span class="o">=</span>
      <span class="k">let</span> <span class="n">ii</span> <span class="o">=</span> <span class="n">i</span>
      <span class="n">s</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="k">proc</span><span class="p">():</span> <span class="kt">int</span> <span class="o">=</span> <span class="k">return</span> <span class="n">ii</span><span class="o">*</span><span class="n">ii</span><span class="p">))()</span>
</code></pre></div></div>

<p>The reason is that environment creations are now only performed once
per proc call. This change is subtle and unfortunate, but:</p>

<ol>
  <li>Affects almost no code out there.</li>
  <li>Is easier to implement and we are at a point in Nim’s development process where simple+stable wins over perfect-in-theory+unstable-in-practice.</li>
  <li>Implies programmers are more in control of where memory is allocated which is beneficial for a systems programming language.</li>
</ol>

<h2 id="bugfixes">Bugfixes</h2>

<p>The list below has been generated based on the commits in Nim’s git
repository. As such it lists only the issues which have been closed
via a commit, for a full list see
<a href="https://github.com/nim-lang/Nim/issues?utf8=%E2%9C%93&amp;q=is%3Aissue+closed%3A%222015-10-27+..+2016-01-19%22+">this link on Github</a>.</p>

<ul>
  <li>Fixed “Generic arguments cannot be used in templates (raising undeclared identifier)”
(<a href="https://github.com/nim-lang/Nim/issues/3498">#3498</a>)</li>
  <li>Fixed “multimethods: Error: internal error: cgmeth.genConv”
(<a href="https://github.com/nim-lang/Nim/issues/3550">#3550</a>)</li>
  <li>Fixed “nimscript - SIGSEGV in except block”
(<a href="https://github.com/nim-lang/Nim/issues/3546">#3546</a>)</li>
  <li>Fixed “Bool literals in macros do not work.”
(<a href="https://github.com/nim-lang/Nim/issues/3541">#3541</a>)</li>
  <li>Fixed “Docs: nativesocket.html - 404”
(<a href="https://github.com/nim-lang/Nim/issues/3582">#3582</a>)</li>
  <li>Fixed ““not nil” return types never trigger an error or warning”
(<a href="https://github.com/nim-lang/Nim/issues/2285">#2285</a>)</li>
  <li>Fixed “No warning or error is raised even if not nil is specified “
(<a href="https://github.com/nim-lang/Nim/issues/3222">#3222</a>)</li>
  <li>Fixed “Incorrect fsmonitor add() filter logic”
(<a href="https://github.com/nim-lang/Nim/issues/3611">#3611</a>)</li>
  <li>Fixed ““nimble install nimsuggest” failed”
(<a href="https://github.com/nim-lang/Nim/issues/3622">#3622</a>)</li>
  <li>Fixed “compile time <code class="language-plaintext highlighter-rouge">excl </code> cause SIGSEGV”
(<a href="https://github.com/nim-lang/Nim/issues/3639">#3639</a>)</li>
  <li>Fixed “Unable to echo unsigned ints at compile-time”
(<a href="https://github.com/nim-lang/Nim/issues/2514">#2514</a>)</li>
  <li>Fixed “Nested closure iterator produces internal error”
(<a href="https://github.com/nim-lang/Nim/issues/1725">#1725</a>)</li>
  <li>Fixed “C Error on walkDirRec closure”
(<a href="https://github.com/nim-lang/Nim/issues/3636">#3636</a>)</li>
  <li>Fixed “Error in generated c code”
(<a href="https://github.com/nim-lang/Nim/issues/3201">#3201</a>)</li>
  <li>Fixed “C Compile-time error with generic proc type.”
(<a href="https://github.com/nim-lang/Nim/issues/2659">#2659</a>)</li>
  <li>Fixed “ICE dereferencing array pointer”
(<a href="https://github.com/nim-lang/Nim/issues/2240">#2240</a>)</li>
  <li>Fixed “Lambda lifting crash”
(<a href="https://github.com/nim-lang/Nim/issues/2007">#2007</a>)</li>
  <li>Fixed “Can’t reference outer variables from a closure in an iterator”
(<a href="https://github.com/nim-lang/Nim/issues/2604">#2604</a>)</li>
  <li>Fixed “M&amp;S collector breaks with nested for loops.”
(<a href="https://github.com/nim-lang/Nim/issues/603">#603</a>)</li>
  <li>Fixed “Regression: bad C codegen”
(<a href="https://github.com/nim-lang/Nim/issues/3723">#3723</a>)</li>
  <li>Fixed “JS backend - handle bool type in case statement”
(<a href="https://github.com/nim-lang/Nim/issues/3722">#3722</a>)</li>
  <li>Fixed “linenoise compilation with cpp”
(<a href="https://github.com/nim-lang/Nim/issues/3720">#3720</a>)</li>
  <li>Fixed “(???,???) duplicate case label”
(<a href="https://github.com/nim-lang/Nim/issues/3665">#3665</a>)</li>
  <li>Fixed “linenoise compilation with cpp”
(<a href="https://github.com/nim-lang/Nim/issues/3720">#3720</a>)</li>
  <li>Fixed “Update list of backward incompatibilities for Nim 0.12.0 in the main site”
(<a href="https://github.com/nim-lang/Nim/issues/3689">#3689</a>)</li>
  <li>Fixed “Can’t compile nimble with latest devel - codegen bug”
(<a href="https://github.com/nim-lang/Nim/issues/3730">#3730</a>)</li>
</ul>

        </div>
      </div>
    </div>
    <footer>
  <section class="content">
    <div class="pure-g">
      <div class="copyright pure-u-2-3">
        <p>
          Unless otherwise stated, the content of this page is
          licensed under the
          <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0</a>
          license.
          Code displayed on this website is MIT licensed.
        </p>
        <p>
          This website is available on
          <a href="https://github.com/nim-lang/website">GitHub</a>
          and contributions are welcome.
          Original website design by
          <a href="https://github.com/dom96">Dominik Picheta</a> and
          <a href="https://github.com/Calinou">Hugo Locurcio</a>.
          Logo by <a href="https://github.com/josephwecker">Joseph Wecker</a>.
        </p>
      </div>
      <div class="pure-u-1-3 right-center">
        <a href="https://m.do.co/c/637ab907c7f4"><img src="/assets/img/do.png"/></a>
      </div>
    </div>
  </section>

</footer>
<script>
    (function(){
      function setTracking(a) {
        var url = a.href;
        a.onclick = function() {
          if (typeof(ga) !== "undefined") {
            ga('send', 'event', 'outbound', 'click', url, {
              'transport': 'beacon',
              'hitCallback': function(){document.location = url;}
            });
          }
        };
      }

      var a = document.getElementsByTagName("a");
      for (var i = 0; i < a.length; ++i) {
        if (a[i].hostname != location.hostname &&
            a[i].getAttribute("target") !== "_blank"
        ) {
          setTracking(a[i])
        }
      }
    })();
</script>

  </div>
  </body>
</html>
